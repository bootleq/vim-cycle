Describe Matcher
  Before each
    new
  End

  After each
    bwipeout!
  End

  Context allows custom #test() function of matcher
    Before all
      function! Foo(group, class_name) abort
        let index = 4
        let ctext = {
              \   'text': '7',
              \   'line': 1,
              \   'col': 7,
              \ }
        return [index, ctext]
      endfunction
    End

    It sets matcher: 'test' in form of String
      call cycle#test#reset_default_groups([
            \   [['foo', 'bar'], #{matcher: #{test: 'Foo'}}],
            \ ])

      call setline(1, '123456789')
      execute 'normal \a'
      Assert Equals(getline(1), '123456bar89')
    End

    It sets matcher: 'test' in form of Funcref
      call cycle#test#reset_default_groups([
            \   [['foo', 'bar'], #{matcher: #{test: function('Foo')}}],
            \ ])

      call setline(1, '123456789')
      execute 'normal \a'
      Assert Equals(getline(1), '123456bar89')
    End
  End
End
